---
// Navbar minimalista fija - Logo, Menú, Contacto, Reservar
const whatsappNumber = "59178555886"; // Número de WhatsApp con código de país
const whatsappMessage = encodeURIComponent(
  "Hola! Me gustaría hacer una reserva en Brasargent Rodizio",
);
---

<nav
  id="navbar"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 backdrop-blur-md bg-black/30"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-20">
      <!-- Logo dinámico con alternancia -->
      <a href="/" class="flex items-center group ml-8 relative">
        <img
          id="logo-primary"
          src="/img/logo/logo-SF.png"
          alt="Brasargent Rodizio Logo"
          class="h-24 w-auto object-contain transition-opacity duration-1000 absolute"
        />
        <img
          id="logo-secondary"
          src="/img/logo/logoRojo-SF.png"
          alt="Brasargent Rodizio Logo"
          class="h-24 w-auto object-contain transition-opacity duration-1000 opacity-0"
        />
      </a>

      <!-- Todos los botones a la derecha (Desktop) -->
      <div class="hidden md:flex items-center gap-8">
        <a
          href="/#inicio"
          class="nav-link text-white hover:text-[#3f371f] transition-colors font-medium"
        >
          Inicio
        </a>
        <a
          href="/#menu"
          class="nav-link text-white hover:text-[#3f371f] transition-colors font-medium"
        >
          Recuerdos
        </a>
        <a
          href="/#contacto"
          class="nav-link text-white hover:text-[#3f371f] transition-colors font-medium"
        >
          Contacto
        </a>
        <a
          href="/sucursales"
          class="nav-link text-white hover:text-[#3f371f] transition-colors font-medium"
        >
          Sucursales
        </a>
        <a
          href="/#contacto"
          class="bg-[#9e2a2b] text-white px-8 py-3 rounded-lg font-semibold hover:bg-[#8a2426] hover:shadow-xl hover:shadow-[#9e2a2b]/50 transition-all duration-300 hover:scale-105 border border-[#9e2a2b] hover:border-[#d4af37]"
        >
          Reservar Mesa
        </a>
      </div>

      <!-- Botón menú móvil animado -->
      <button
        id="mobile-menu-btn"
        class="md:hidden relative w-20 h-10 text-white focus:outline-none z-50 flex items-center justify-center transition-opacity duration-300 mr-8"
        aria-label="Abrir menú"
      >
        <div class="relative w-6 h-5">
          <span class="hamburger-line top-0"></span>
          <span class="hamburger-line top-1/2 -translate-y-1/2"></span>
          <span class="hamburger-line bottom-0"></span>
        </div>
      </button>
    </div>
  </div>
</nav>

<!-- Menú móvil moderno - Pantalla completa -->
<div
  id="mobile-menu"
  class="fixed inset-0 z-[9999] transform translate-x-full transition-transform duration-500 ease-out md:hidden"
>
  <!-- Overlay oscuro completo con mejor opacidad -->
  <div class="absolute inset-0 bg-black/95 backdrop-blur-md"></div>

  <!-- Contenido del menú -->
  <div
    class="relative h-full flex flex-col justify-center items-center px-6 py-4"
  >
    <!-- Botón de cierre (X) - Esquina superior derecha -->
    <div class="absolute top-6 right-6 z-50">
      <button
        id="mobile-close-btn"
        class="mobile-link w-12 h-12 flex items-center justify-center bg-white/10 hover:bg-white/20 rounded-full transition-all duration-300 hover:scale-110 hover:rotate-90 border-2 border-white/20 hover:border-[#d4af37]"
        aria-label="Cerrar menú"
        style="animation-delay: 0s"
      >
        <svg
          class="w-6 h-6 text-white"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2.5"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>

    <!-- Contenedor central compacto -->
    <div class="flex flex-col items-center w-full max-w-sm mt-8">
      <!-- Logo en el menú móvil (Dinámico) -->
      <div
        class="mobile-link mb-6 relative h-24 w-full flex justify-center items-center"
        style="animation-delay: 0.1s"
      >
        <!-- Destello blanco para legibilidad - Intensificado -->
        <div
          class="absolute w-56 h-56 bg-white/50 blur-[60px] rounded-full pointer-events-none"
        >
        </div>

        <img
          id="mobile-logo-primary"
          src="/img/logo/logo-SF.png"
          alt="Brasargent Logo"
          class="h-24 w-auto absolute transition-opacity duration-1000"
        />
        <img
          id="mobile-logo-secondary"
          src="/img/logo/logoRojo-SF.png"
          alt="Brasargent Logo"
          class="h-24 w-auto absolute transition-opacity duration-1000 opacity-0"
        />
      </div>

      <!-- Links del menú con mejor espaciado -->
      <nav class="flex flex-col space-y-3 text-center w-full">
        <a
          href="/#inicio"
          class="mobile-link block text-white text-2xl sm:text-3xl font-bold hover:text-[#d4af37] transition-all duration-300 transform hover:scale-105 py-1 px-6 rounded-lg hover:bg-white/5"
          style="animation-delay: 0.15s"
        >
          Inicio
        </a>

        <!-- Separador sutil -->
        <div
          class="h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"
        >
        </div>

        <a
          href="/#menu"
          class="mobile-link block text-white text-2xl sm:text-3xl font-bold hover:text-[#d4af37] transition-all duration-300 transform hover:scale-105 py-1 px-6 rounded-lg hover:bg-white/5"
          style="animation-delay: 0.2s"
        >
          Recuerdos
        </a>

        <!-- Separador sutil -->
        <div
          class="h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"
        >
        </div>

        <a
          href="/#contacto"
          class="mobile-link block text-white text-2xl sm:text-3xl font-bold hover:text-[#d4af37] transition-all duration-300 transform hover:scale-105 py-1 px-6 rounded-lg hover:bg-white/5"
          style="animation-delay: 0.25s"
        >
          Contacto
        </a>

        <!-- Separador sutil -->
        <div
          class="h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"
        >
        </div>

        <a
          href="/sucursales"
          class="mobile-link block text-white text-2xl sm:text-3xl font-bold hover:text-[#d4af37] transition-all duration-300 transform hover:scale-105 py-1 px-6 rounded-lg hover:bg-white/5"
          style="animation-delay: 0.3s"
        >
          Sucursales
        </a>
      </nav>

      <!-- Botón de reserva destacado con mejor espaciado -->
      <div class="mobile-link w-full mt-6" style="animation-delay: 0.35s">
        <a
          href="/#contacto"
          class="block w-full bg-gradient-to-r from-[#9e2a2b] to-[#8a2426] text-white px-8 py-4 rounded-xl font-bold text-xl text-center hover:shadow-[0_0_40px_rgba(158,42,43,0.7)] hover:scale-105 transition-all duration-300 border-2 border-[#9e2a2b] hover:border-[#d4af37]"
        >
          🍖 Reservar Mesa
        </a>
      </div>

      <!-- Decoración mejorada -->
      <div
        class="absolute top-20 right-10 w-40 h-40 bg-[#d4af37]/10 rounded-full blur-3xl pointer-events-none"
      >
      </div>
      <div
        class="absolute bottom-20 left-10 w-40 h-40 bg-[#9e2a2b]/10 rounded-full blur-3xl pointer-events-none"
      >
      </div>
    </div>
  </div>

  <!-- Espaciador para compensar navbar fija -->
  <div class="h-20"></div>

  <script>
    // Alternancia dinámica del logo (Header y Móvil)
    const logoPrimary = document.getElementById("logo-primary");
    const logoSecondary = document.getElementById("logo-secondary");
    const mobileLogoPrimary = document.getElementById("mobile-logo-primary");
    const mobileLogoSecondary = document.getElementById(
      "mobile-logo-secondary",
    );
    let isShowingPrimary = true;

    function alternateLogo() {
      if (isShowingPrimary) {
        // Ocultar primario, mostrar secundario
        logoPrimary?.classList.add("opacity-0");
        logoSecondary?.classList.remove("opacity-0");
        mobileLogoPrimary?.classList.add("opacity-0");
        mobileLogoSecondary?.classList.remove("opacity-0");
      } else {
        // Mostrar primario, ocultar secundario
        logoPrimary?.classList.remove("opacity-0");
        logoSecondary?.classList.add("opacity-0");
        mobileLogoPrimary?.classList.remove("opacity-0");
        mobileLogoSecondary?.classList.add("opacity-0");
      }
      isShowingPrimary = !isShowingPrimary;
    }

    // Alternar cada 3 segundos
    setInterval(alternateLogo, 3000);

    // Toggle menú móvil con animaciones
    const mobileMenuBtn = document.getElementById("mobile-menu-btn");
    const mobileCloseBtn = document.getElementById("mobile-close-btn");
    const mobileMenu = document.getElementById("mobile-menu");
    const navbar = document.getElementById("navbar");
    const hamburgerLines = document.querySelectorAll(".hamburger-line");
    const mobileLinkElements = document.querySelectorAll(".mobile-link");
    let isMenuOpen = false;

    // Función para abrir el menú
    function openMenu() {
      isMenuOpen = true;
      // Abrir menú
      mobileMenu?.classList.remove("translate-x-full");
      document.body.style.overflow = "hidden";

      // Ocultar el botón hamburger para evitar doble X
      if (mobileMenuBtn) {
        mobileMenuBtn.style.opacity = "0";
        mobileMenuBtn.style.pointerEvents = "none";
      }

      // Animar links con delay
      mobileLinkElements.forEach((link, index) => {
        setTimeout(() => {
          link.classList.add("fade-in");
        }, index * 100);
      });
    }

    // Función para cerrar el menú
    function closeMenu() {
      isMenuOpen = false;
      // Cerrar menú
      mobileMenu?.classList.add("translate-x-full");
      document.body.style.overflow = "";

      // Mostrar el botón hamburger nuevamente
      if (mobileMenuBtn) {
        mobileMenuBtn.style.opacity = "1";
        mobileMenuBtn.style.pointerEvents = "auto";
      }

      // Remover animación de links
      mobileLinkElements.forEach((link) => {
        link.classList.remove("fade-in");
      });
    }

    // Event listener para el botón hamburger
    mobileMenuBtn?.addEventListener("click", () => {
      if (isMenuOpen) {
        closeMenu();
      } else {
        openMenu();
      }
    });

    // Event listener para el botón de cierre (X)
    mobileCloseBtn?.addEventListener("click", () => {
      closeMenu();
    });

    // Cerrar menú móvil al hacer clic en un enlace
    mobileLinkElements?.forEach((link) => {
      link.addEventListener("click", () => {
        if (isMenuOpen) {
          closeMenu();
        }
      });
    });

    // Cambiar fondo del navbar y color de letras al hacer scroll
    const navLinks = document.querySelectorAll(".nav-link");

    window.addEventListener("scroll", () => {
      if (window.scrollY > 50) {
        // Scroll hacia abajo: plomo claro con blur y letras negras
        navbar?.classList.remove("bg-black/30");
        navbar?.classList.add("bg-gray-200/95", "shadow-lg");

        // Cambiar letras a negro
        navLinks.forEach((link) => {
          link.classList.remove("text-white");
          link.classList.add("text-black");
        });
      } else {
        // Arriba: transparente con blur y letras blancas
        navbar?.classList.add("bg-black/30");
        navbar?.classList.remove("bg-gray-200/95", "shadow-lg");

        // Cambiar letras a blanco
        navLinks.forEach((link) => {
          link.classList.add("text-white");
          link.classList.remove("text-black");
        });
      }
    });

    // Smooth scroll para todos los enlaces con #
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", (e) => {
        const href = (anchor as HTMLAnchorElement).getAttribute("href");
        if (href && href !== "#") {
          e.preventDefault();
          const target = document.querySelector(href);
          if (target) {
            target.scrollIntoView({ behavior: "smooth", block: "start" });
          }
        }
      });
    });
  </script>

  <style>
    /* Hamburger lines */
    .hamburger-line {
      position: absolute;
      width: 100%;
      height: 2px;
      background-color: white;
      border-radius: 9999px;
      transition: all 0.3s ease;
    }

    /* Animacin de fade-in para links */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }
  </style>
</div>
