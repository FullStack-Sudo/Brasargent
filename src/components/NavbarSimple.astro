---
// Navbar minimalista fija - Logo, Menú, Contacto, Reservar
const whatsappNumber = "59178555886"; // Número de WhatsApp con código de país
const whatsappMessage = encodeURIComponent(
  "Hola! Me gustaría hacer una reserva en Brasargent Rodizio",
);
---

<nav
  id="navbar"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 backdrop-blur-md bg-black/30"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-20">
      <!-- Logo dinámico con alternancia -->
      <a href="/" class="flex items-center group ml-8 relative">
        <img
          id="logo-primary"
          src="/img/logo/logo-SF.png"
          alt="Brasargent Rodizio Logo"
          class="h-24 w-auto object-contain transition-opacity duration-1000 absolute"
        />
        <img
          id="logo-secondary"
          src="/img/logo/logoRojo-SF.png"
          alt="Brasargent Rodizio Logo"
          class="h-24 w-auto object-contain transition-opacity duration-1000 opacity-0"
        />
      </a>

      <!-- Todos los botones a la derecha (Desktop) -->
      <div class="hidden md:flex items-center gap-8">
        <a
          href="/#inicio"
          class="nav-link text-white hover:text-[#3f371f] transition-colors font-medium"
        >
          Inicio
        </a>
        <a
          href="/#menu"
          class="nav-link text-white hover:text-[#3f371f] transition-colors font-medium"
        >
          Recuerdos
        </a>
        <a
          href="/#contacto"
          class="nav-link text-white hover:text-[#3f371f] transition-colors font-medium"
        >
          Contacto
        </a>
        <a
          href="/sucursales"
          class="nav-link text-white hover:text-[#3f371f] transition-colors font-medium"
        >
          Sucursales
        </a>
        <a
          href="/#contacto"
          class="bg-[#9e2a2b] text-white px-8 py-3 rounded-lg font-semibold hover:bg-[#8a2426] hover:shadow-xl hover:shadow-[#9e2a2b]/50 transition-all duration-300 hover:scale-105 border border-[#9e2a2b] hover:border-[#d4af37]"
        >
          Reservar Mesa
        </a>
      </div>

      <!-- Botón menú móvil animado -->
      <button
        id="mobile-menu-btn"
        class="md:hidden relative w-10 h-10 text-white focus:outline-none z-50 flex items-center justify-center mr-8"
        aria-label="Abrir menú"
      >
        <div class="relative w-6 h-5">
          <span class="hamburger-line top-0"></span>
          <span class="hamburger-line top-1/2 -translate-y-1/2"></span>
          <span class="hamburger-line bottom-0"></span>
        </div>
      </button>
    </div>
  </div>

  <!-- Menú móvil moderno -->
  <div
    id="mobile-menu"
    class="fixed inset-0 z-40 transform translate-x-full transition-transform duration-500 ease-out md:hidden"
  >
    <!-- Overlay oscuro con blur -->
    <div class="absolute inset-0 bg-black/95 backdrop-blur-md"></div>

    <!-- Contenido del menú -->
    <div class="relative h-full flex flex-col justify-center items-center px-8">
      <!-- Links del menú -->
      <nav class="space-y-8 text-center">
        <a
          href="/#inicio"
          class="mobile-link block text-white text-3xl font-bold hover:text-[#d4af37] transition-all duration-300 transform hover:scale-110"
          style="animation-delay: 0.1s"
        >
          Inicio
        </a>
        <a
          href="/#menu"
          class="mobile-link block text-white text-3xl font-bold hover:text-[#d4af37] transition-all duration-300 transform hover:scale-110"
          style="animation-delay: 0.2s"
        >
          Menú
        </a>
        <a
          href="/#contacto"
          class="mobile-link block text-white text-3xl font-bold hover:text-[#d4af37] transition-all duration-300 transform hover:scale-110"
          style="animation-delay: 0.3s"
        >
          Contacto
        </a>
        <a
          href="/sucursales"
          class="mobile-link block text-white text-3xl font-bold hover:text-[#d4af37] transition-all duration-300 transform hover:scale-110"
          style="animation-delay: 0.4s"
        >
          Sucursales
        </a>
      </nav>

      <!-- Botón de reserva destacado -->
      <div class="mt-12" style="animation-delay: 0.5s">
        <a
          href="/#contacto"
          class="mobile-link inline-block bg-[#9e2a2b] text-white px-12 py-5 rounded-lg font-bold text-xl hover:bg-[#8a2426] hover:shadow-[0_0_30px_rgba(158,42,43,0.6)] hover:scale-105 transition-all duration-300 border-2 border-[#9e2a2b] hover:border-[#d4af37]"
        >
          Reservar Mesa
        </a>
      </div>

      <!-- Decoración -->
      <div
        class="absolute top-10 right-10 w-32 h-32 bg-[#d4af37]/10 rounded-full blur-3xl"
      >
      </div>
      <div
        class="absolute bottom-10 left-10 w-32 h-32 bg-[#9e2a2b]/10 rounded-full blur-3xl"
      >
      </div>
    </div>
  </div>
</nav>

<!-- Espaciador para compensar navbar fija -->
<div class="h-20"></div>

<script>
  // Alternancia dinámica del logo
  const logoPrimary = document.getElementById("logo-primary");
  const logoSecondary = document.getElementById("logo-secondary");
  let isShowingPrimary = true;

  function alternateLogo() {
    if (isShowingPrimary) {
      logoPrimary?.classList.add("opacity-0");
      logoSecondary?.classList.remove("opacity-0");
    } else {
      logoPrimary?.classList.remove("opacity-0");
      logoSecondary?.classList.add("opacity-0");
    }
    isShowingPrimary = !isShowingPrimary;
  }

  // Alternar cada 3 segundos
  setInterval(alternateLogo, 3000);

  // Toggle menú móvil con animaciones
  const mobileMenuBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  const navbar = document.getElementById("navbar");
  const hamburgerLines = document.querySelectorAll(".hamburger-line");
  const mobileLinkElements = document.querySelectorAll(".mobile-link");
  let isMenuOpen = false;

  mobileMenuBtn?.addEventListener("click", () => {
    isMenuOpen = !isMenuOpen;

    if (isMenuOpen) {
      // Abrir menú
      mobileMenu?.classList.remove("translate-x-full");
      document.body.style.overflow = "hidden";

      // Animar hamburger a X
      hamburgerLines[0]?.classList.add(
        "rotate-45",
        "top-1/2",
        "-translate-y-1/2",
      );
      hamburgerLines[0]?.classList.remove("top-0");
      hamburgerLines[1]?.classList.add("opacity-0");
      hamburgerLines[2]?.classList.add(
        "-rotate-45",
        "top-1/2",
        "-translate-y-1/2",
      );
      hamburgerLines[2]?.classList.remove("bottom-0");

      // Animar links con delay
      mobileLinkElements.forEach((link, index) => {
        setTimeout(() => {
          link.classList.add("fade-in");
        }, index * 100);
      });
    } else {
      // Cerrar menú
      mobileMenu?.classList.add("translate-x-full");
      document.body.style.overflow = "";

      // Animar X a hamburger
      hamburgerLines[0]?.classList.remove(
        "rotate-45",
        "top-1/2",
        "-translate-y-1/2",
      );
      hamburgerLines[0]?.classList.add("top-0");
      hamburgerLines[1]?.classList.remove("opacity-0");
      hamburgerLines[2]?.classList.remove(
        "-rotate-45",
        "top-1/2",
        "-translate-y-1/2",
      );
      hamburgerLines[2]?.classList.add("bottom-0");

      // Remover animación de links
      mobileLinkElements.forEach((link) => {
        link.classList.remove("fade-in");
      });
    }
  });

  // Cerrar menú móvil al hacer clic en un enlace
  mobileLinkElements?.forEach((link) => {
    link.addEventListener("click", () => {
      if (isMenuOpen) {
        mobileMenuBtn?.click();
      }
    });
  });

  // Cambiar fondo del navbar y color de letras al hacer scroll
  const navLinks = document.querySelectorAll(".nav-link");

  window.addEventListener("scroll", () => {
    if (window.scrollY > 50) {
      // Scroll hacia abajo: plomo claro con blur y letras negras
      navbar?.classList.remove("bg-black/30");
      navbar?.classList.add("bg-gray-200/95", "shadow-lg");

      // Cambiar letras a negro
      navLinks.forEach((link) => {
        link.classList.remove("text-white");
        link.classList.add("text-black");
      });
    } else {
      // Arriba: transparente con blur y letras blancas
      navbar?.classList.add("bg-black/30");
      navbar?.classList.remove("bg-gray-200/95", "shadow-lg");

      // Cambiar letras a blanco
      navLinks.forEach((link) => {
        link.classList.add("text-white");
        link.classList.remove("text-black");
      });
    }
  });

  // Smooth scroll para todos los enlaces con #
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", (e) => {
      const href = (anchor as HTMLAnchorElement).getAttribute("href");
      if (href && href !== "#") {
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) {
          target.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      }
    });
  });
</script>

<style>
  /* Hamburger lines */
  .hamburger-line {
    position: absolute;
    width: 100%;
    height: 2px;
    background-color: white;
    border-radius: 9999px;
    transition: all 0.3s ease;
  }

  /* Animaci�n de fade-in para links */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .fade-in {
    animation: fadeIn 0.5s ease-out forwards;
  }
</style>
